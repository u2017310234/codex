你本质上要做的是：

用京东（供给侧）+ 豆瓣（评价与地位侧）数据，构建一个“首版首印精装书升值潜力评分模型”，再让大模型做最后的语义判断与过滤。

这套系统要能部署在 GitHub Actions 上，最终输出可追踪的“升值潜力指数”和观察池清单。

---

一、目标与输出

目标
- 在新书上市早期识别“可能进入经典序列或形成稀缺溢价”的书。
- 可解释、可复盘，支持半年级别的滚动更新。

输出
- 单本书的升值潜力指数（0–100）
- 结构化评分 + LLM 评分 + 解释说明
- 观察池（Top N）和淘汰池（低潜力）

二、总体架构：三层模型

数据层（京东 + 豆瓣）
        ↓
结构化评分层（规则模型）
        ↓
大模型判断层（语义 + 趋势推断）
        ↓
最终“升值潜力指数”

三、数据来源与可抓取字段设计

1) 京东（供应与版本信息）

用于判断：版本、装帧、价格、限量、签名、供给收缩

核心字段

| 字段 | 作用 |
| --- | --- |
| 书名 | 主键之一 |
| 作者 | 权重判断 |
| 出版社 | 权威度 |
| 出版时间 | 是否首版 |
| 印次信息 | 是否首印 |
| ISBN | 主键之一 |
| 装帧（精装/平装） | 精装优先 |
| 是否限量 | 稀缺性 |
| 是否签名 | 高权重 |
| 原价 | 参考成本 |
| 当前价格 | 是否有溢价迹象 |
| 是否断货 | 供给收缩信号 |
| 上市时间 | 早期识别窗口 |

2) 豆瓣（需求与文化地位）

用于判断：长期文化价值与共识强度

核心字段

| 字段 | 作用 |
| --- | --- |
| 评分 | 质量 |
| 评分人数 | 共识强度 |
| 标签（政治/历史/思想等） | 长期需求稳定性 |
| 是否获奖 | 奖项溢价 |
| 是否被改编 | IP 潜力 |
| 书评关键词 | 时代性/经典性 |
| 作者简介 | 经典序列判断 |

可选增强
- 二手平台溢价（闲鱼、孔夫子等）：仅用于市场信号层，不参与文化价值判断。
- 出版社名录：用于“权威出版社”名单匹配。

四、数据标准化与主键策略

统一字段
- title、author、publisher、isbn、publish_date、print_info、binding、price_list、price_now、is_signed、is_limited、stock_status、jd_url、douban_url

主键匹配
- 优先使用 ISBN
- ISBN 缺失时使用 title + author + publisher 模糊匹配

归一化规则
- 价格：统一为人民币、去掉满减干扰
- 印次：抽取“首版”“首印”关键词
- 装帧：统一映射为 hardcover / paperback

五、结构化评分模型（第一层过滤）

建立 “升值潜力基础评分（0–100）”，并设定硬性降权规则。

评分项与权重

① 版本稀缺评分（30分）

| 条件 | 分数 |
| --- | --- |
| 首版首印 | +15 |
| 精装 | +5 |
| 限量发行 | +5 |
| 作者签名 | +5 |

硬性规则
- 若非首版首印，最终基础评分乘以 0.5

② 作者与作品地位（25分）

| 条件 | 分数 |
| --- | --- |
| 诺奖/茅奖等顶级奖项 | +10 |
| 已进入“经典序列” | +8 |
| 重要思想类著作 | +5 |
| 改编影视 | +2 |

③ 豆瓣共识度（20分）

质量强度指数 = 评分 × ln(评分人数)

分级

| 区间 | 分数 |
| --- | --- |
| 前5% | 20 |
| 前10% | 15 |
| 前20% | 10 |
| 其他 | 0–5 |

④ 题材长期需求（15分）

高分主题
- 政治哲学、经济思想、历史重大事件、社会学基础理论

低分主题
- 纯流行爽文、短期热梗

⑤ 市场信号（10分）

| 条件 | 分数 |
| --- | --- |
| 断货或长期缺货 | +5 |
| 当前价 > 原价 15% | +3 |
| 二手平台明显溢价 | +2 |

六、大模型参与方式（关键）

规则模型提供“可解释的基础判断”，LLM 负责语义推断与趋势判断，并可对结构化评分进行小幅修正，用于纠偏。

LLM 需要完成四件事

1) 经典序列潜力（0–10）

输入
- 作者履历
- 作品主题
- 获奖情况
- 评论关键词

输出
- 经典潜力评分 + 简要理由

2) 时代节点意义（0–10）

判断是否代表思想转折、社会变革节点或叙事源头。

3) IP 扩散潜力（0–10）

判断是否适合影视改编、是否具有全球传播潜力、作者是否处于事业上升期。

4) 结构化分数修正（-10 到 +10）

基于语义信息对脚本层评分进行小幅纠偏，避免“高分但不具长期价值”或“低分但具潜力”的极端误判。

建议的 LLM 输出格式（强制 JSON）

```json
{
  "classic_potential": 0,
  "era_significance": 0,
  "ip_potential": 0,
  "structured_adjustment": 0,
  "confidence": 0,
  "rationale": ""
}
```

七、最终评分公式（融合规则 + LLM）

先把 LLM 得分换算到 0–100。

```text
llm_classic = classic_potential * 10
llm_era_ip = ((era_significance + ip_potential) / 2) * 10
structured_score_adj = clamp(structured_score + structured_adjustment, 0, 100)

final_score = 0.5 * structured_score_adj + 0.3 * llm_classic + 0.2 * llm_era_ip
```

输出分级

| 分数 | 解读 |
| --- | --- |
| 80+ | 高潜力（重点跟踪） |
| 60–80 | 可观察 |
| <60 | 阅读价值为主 |

八、可执行流程（工程化）

1. 抓取京东新书榜单（优先使用榜单/排行榜页面）
2. 标准化字段并去重
3. 匹配豆瓣数据（评分、评分人数、标签、奖项）
4. 运行结构化评分模型，筛选 Top 10%
5. 交给 LLM 做深度判断，输出解释性结论
6. 建立观察池与淘汰池
7. 半年更新一次（获奖、改编、断货、价格变化）

九、GitHub Actions 部署建议

运行频率
- 每周一次（新书识别）
- 每半年一次（观察池复盘）

关键环境变量
- `GEMINI_API_KEY`
- `GEMINI_MODEL`

建议流程（示意）

```yaml
- uses: actions/setup-python@v5
  with:
    python-version: '3.11'
- run: python -m pip install -r requirements.txt
- run: python pipelines/run_pipeline.py
  env:
    GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
    GEMINI_MODEL: gemini-1.5-pro
```

十、校准与复盘

校准思路
- 选取 5–10 年前的已知“经典书”做回测
- 对比模型评分与现实价格、稀缺度
- 调整权重并记录版本号

监控指标
- 结构化评分 Top10% 的 LLM 回传比例
- 观察池半年内的价格变化命中率

十一、关键认知（避免系统误判）

- 绝大多数书不会增值，系统要容忍 95% 淘汰率。
- 真正赚钱的往往是顶级中的顶级，或冷门中的孤本。
- 时间是核心变量：5 年以内噪声大，15 年以上才体现筛选优势。
